<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vivienne Westwood</title>
  <link rel="stylesheet" href="./assets/css/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"/>
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  integrity="sha512-pQvZmE9PvQljPN8LjE0scyT1fIyzcK6A3a2LcGTv8b1jZb+UnK1KVhOw9DkxphNTzC2c6rYK5Vx1z6js0y+e0A=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>

</head>

<body>
  <header class="cabecalho">
    <img src="./assets/imagens/logo.png" alt="Logo Vivienne Westwood" />
  </header>

  <main>
    <section class="navegacao">
      <nav class="menu">
        <ul>
                <li><a href="index.html">Início</a></li>
                    <li><a href="index.html#colecoes">Coleções</a></li>
                    <li><a href="index.html#sobreavivi">Sobre</a></li>
                    <li><a href="lojas.html">Lojas</a></li>
                    <li><a href="favs.html">Favoritos</a></li>
        </ul>
      </nav>
    </section>
    <main>
        <h2>Meus favoritos</h2>
        <div id="favoritos-container"></div>

    </main>
   
  <footer class="rodape">
    <p>Todos os direitos reservados &copy; 2025</p>
    <img src="./assets/imagens/logotipo.png" alt="Logotipo" />
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script src="./assets/js/app.js"></script>
  <script>
  // Usuário padrão (caso não exista)
  if(!localStorage.getItem("usuarios")) {
    const padrao = [{user:"admin", senha:"123"}];
    localStorage.setItem("usuarios", JSON.stringify(padrao));
  }

  const btnEntrar = document.getElementById("entrar");
  const inputUser = document.getElementById("user");
  const inputSenha = document.getElementById("senha");
  const linkCadastro = document.getElementById("cadastrar");
  const btnPostar = document.querySelector(".publish");

  // Verifica login ao carregar
  function verificarLogin(){
    const logado = localStorage.getItem("logado");
    const nomeUsuario = localStorage.getItem("usuarioLogado");

    if(logado === "true"){
      document.querySelectorAll("label").forEach(label =>{
        label.style.display = "none";
    });

      btnPostar.style.display = "block";

      inputUser.value = nomeUsuario;
      inputUser.setAttribute("readonly", true);

      inputSenha.style.display = "none";     // esconder senha
      btnEntrar.textContent = "Sair";      // não mais botão de login

      btnEntrar.onclick = () => {
        localStorage.removeItem("logado");
        localStorage.removeItem("usuarioLogado");
        location.reload(); // atualiza a página
      }

      linkCadastro.style.display = "none";
      linkCadastro.href = "#";


    } else {
      // Não logado
      btnPostar.style.display = "none";
      inputSenha.style.display = "block";
      inputUser.removeAttribute("readonly");
      btnEntrar.disabled = false;
      btnEntrar.textContent = "Entrar";
      linkCadastro.textContent = "Cadastre-se!";
    }
  }

  verificarLogin();

  // LOGIN
  btnEntrar.addEventListener("click", function(e){
    e.preventDefault();

    const userDigitado = inputUser.value.trim();
    const senhaDigitada = inputSenha.value.trim();
    const usuarios = JSON.parse(localStorage.getItem("usuarios"));

    const encontrado = usuarios.find(u => u.user === userDigitado && u.senha === senhaDigitada);

    if(encontrado){
      alert("Login realizado com sucesso!");

      localStorage.setItem("logado", "true");
      localStorage.setItem("usuarioLogado", encontrado.user);

      verificarLogin();
    } else {
      alert("Usuário ou senha incorretos.");
    }
  });

  const favoritosContainer = document.getElementById("favoritos-container");

const favoritos = document.querySelectorAll(".card.fav");

favoritos.forEach(card => {
  const clone = card.cloneNode(true); // clona o card
  favoritosContainer.appendChild(clone); // coloca na área de favoritos
});

</script>

</body>

</html>
